import{u as P,a as V,c as E,h as G}from"./render-C_ucUOdZ.js";import{k as M,g as O,c as i,h as k,d as B,a8 as c,a2 as d,a9 as a,F as q,f as _,a3 as D,a6 as r,aa as m,o as W,ab as z,a1 as R}from"./index-D07yvUKN.js";import{b as T,u as j,a as U,c as x,l as L,h as S,e as H,d as N}from"./utils-BDpRpat_.js";const J={...P,min:{type:Number,default:0},max:{type:Number,default:100},color:String,centerColor:String,trackColor:String,fontSize:String,rounded:Boolean,thickness:{type:Number,default:.2,validator:e=>e>=0&&e<=1},angle:{type:Number,default:0},showValue:Boolean,reverse:Boolean,instantFeedback:Boolean},C=50,F=2*C,I=F*Math.PI,K=Math.round(I*1e3)/1e3,X=M({name:"QCircularProgress",props:{...J,value:{type:Number,default:0},animationSpeed:{type:[String,Number],default:600},indeterminate:Boolean},setup(e,{slots:t}){const{proxy:{$q:u}}=O(),h=V(e),s=i(()=>{const n=(u.lang.rtl===!0?-1:1)*e.angle;return{transform:e.reverse!==(u.lang.rtl===!0)?`scale3d(-1, 1, 1) rotate3d(0, 0, 1, ${-90-n}deg)`:`rotate3d(0, 0, 1, ${n-90}deg)`}}),y=i(()=>e.instantFeedback!==!0&&e.indeterminate!==!0?{transition:`stroke-dashoffset ${e.animationSpeed}ms ease 0s, stroke ${e.animationSpeed}ms ease`}:""),l=i(()=>F/(1-e.thickness/2)),b=i(()=>`${l.value/2} ${l.value/2} ${l.value} ${l.value}`),v=i(()=>T(e.value,e.min,e.max)),f=i(()=>e.max-e.min),g=i(()=>e.thickness/2*l.value),A=i(()=>{const n=(e.max-v.value)/f.value,w=e.rounded===!0&&v.value<e.max&&n<.25?g.value/2*(1-n/.25):0;return I*n+w});function o({thickness:n,offset:w,color:$,cls:Q,rounded:p}){return k("circle",{class:"q-circular-progress__"+Q+($!==void 0?` text-${$}`:""),style:y.value,fill:"transparent",stroke:"currentColor","stroke-width":n,"stroke-dasharray":K,"stroke-dashoffset":w,"stroke-linecap":p,cx:l.value,cy:l.value,r:C})}return()=>{const n=[];e.centerColor!==void 0&&e.centerColor!=="transparent"&&n.push(k("circle",{class:`q-circular-progress__center text-${e.centerColor}`,fill:"currentColor",r:C-g.value/2,cx:l.value,cy:l.value})),e.trackColor!==void 0&&e.trackColor!=="transparent"&&n.push(o({cls:"track",thickness:g.value,offset:0,color:e.trackColor})),n.push(o({cls:"circle",thickness:g.value,offset:A.value,color:e.color,rounded:e.rounded===!0?"round":void 0}));const w=[k("svg",{class:"q-circular-progress__svg",style:s.value,viewBox:b.value,"aria-hidden":"true"},n)];return e.showValue===!0&&w.push(k("div",{class:"q-circular-progress__text absolute-full row flex-center content-center",style:{fontSize:e.fontSize}},t.default!==void 0?t.default():[k("div",v.value)])),k("div",{class:`q-circular-progress q-circular-progress--${e.indeterminate===!0?"in":""}determinate`,style:h.value,role:"progressbar","aria-valuemin":e.min,"aria-valuemax":e.max,"aria-valuenow":e.indeterminate===!0?void 0:v.value},E(t.internal,w))}}}),Y=["horizontal","vertical","cell","none"],Z=M({name:"QMarkupTable",props:{...j,dense:Boolean,flat:Boolean,bordered:Boolean,square:Boolean,wrapCells:Boolean,separator:{type:String,default:"horizontal",validator:e=>Y.includes(e)}},setup(e,{slots:t}){const u=O(),h=U(e,u.proxy.$q),s=i(()=>`q-markup-table q-table__container q-table__card q-table--${e.separator}-separator`+(h.value===!0?" q-table--dark q-table__card--dark q-dark":"")+(e.dense===!0?" q-table--dense":"")+(e.flat===!0?" q-table--flat":"")+(e.bordered===!0?" q-table--bordered":"")+(e.square===!0?" q-table--square":"")+(e.wrapCells===!1?" q-table--no-wrap":""));return()=>k("div",{class:s.value},[k("table",{class:"q-table"},G(t.default))])}}),ee={class:"column items-center"},te={style:{"font-size":"18px"}},ae={class:"col"},se={class:"text-weight-thin"},ne={class:"col"},le={key:1,class:"col"},re={class:"col"},oe={class:"text-right"},ie={class:"text-right"},ue={class:"text-right"},de={class:"text-right"},ce=B({__name:"ShowSellerInfo",props:{seller:Object,isWeekView:Boolean},setup(e){const t=e,u=i(()=>Math.round(((t.seller?.salesAmount||0)+(t.seller?.remissionsAmount||0))/((t.seller?.salesGoal||1)/(t.isWeekView?4:1))*100));return(h,s)=>(d(),c("div",ee,[t.seller?.salesGoal?(d(),c(q,{key:0},[_(X,{"show-value":"","font-size":"12px",value:u.value,size:"80px",color:"teal","track-color":"grey-5"},{default:D(()=>[a("div",te,r(u.value)+"%",1)]),_:1},8,["value"]),a("div",ae,[a("span",null,r(m(x)((t.seller?.remissionsAmount||0)+(t.seller?.salesAmount||0))),1),a("span",se,r(" de "+m(x)(t.seller?.salesGoal/(t.isWeekView?4:1)||0)),1)]),a("div",ne,r(t.seller?.sellerName),1)],64)):(d(),c("div",le,r(t.seller?.sellerName+"  "+m(x)((t.seller?.remissionsAmount||0)+(t.seller?.salesAmount||0))),1)),a("div",re,[_(Z,{dense:"",borderless:"",flat:"",class:"bg-transparent"},{default:D(()=>[a("tbody",null,[a("tr",null,[s[0]||(s[0]=a("td",{class:"text-weight-thin"},"FacturaciÃ³n",-1)),a("td",oe,r(m(x)(t.seller?.salesAmount||0)),1)]),a("tr",null,[s[1]||(s[1]=a("td",{class:"text-weight-thin"},"Remisiones",-1)),a("td",ie,r(m(x)(t.seller?.remissionsAmount||0)),1)]),a("tr",null,[s[2]||(s[2]=a("td",{class:"text-weight-thin"},"# de cotizaciones",-1)),a("td",ue,r(t.seller?.noOfQuotations||0),1)]),a("tr",null,[s[3]||(s[3]=a("td",{class:"text-weight-thin"},"Ticket promedio cotizaciones",-1)),a("td",de,r(m(x)((t.seller?.quotationsAmount||0)/(t.seller?.noOfQuotations||1))),1)])])]),_:1})])]))}}),me={style:{border:"1px","border-radius":"16px","background-color":"rgba(0, 0, 0, 0.05)"}},he={class:"text-center q-py-sm",style:{"font-size":"30px"}},ve={class:"text-weight-thin"},fe={class:"row wrap items-end justify-evenly items-start content-start"},ke=B({__name:"MainDashboard",props:{companies:Array,allDataFromMonday:Array,year:Number,month:Number,week:Number,weekStartAndEnd:Array},setup(e){const t=e;W(()=>{console.log("mounted")});const u=i(()=>t?.companies?.map(h=>{const s=L.filter(f=>f.company===h),y=t.month===0,l=y?S(t.weekStartAndEnd?.[t.week||0]?.startDate):S().set("year",t.year??0).set("month",(t.month??0)-1).startOf("month"),b=y?S(t.weekStartAndEnd?.[t.week||0]?.endDate):S(l).endOf("month"),v=s?.map(f=>{const g=t?.allDataFromMonday?.filter(o=>o.sellerId===f.itemId&&S(o.date).isBetween(l,b,"days","[]")),A={month:t.month,year:t.year,sellerId:f.itemId,sellerName:f.name,noOfQuotations:0,quotationsAmount:0,remissionsAmount:0,salesAmount:0,salesGoal:f.salesGoal};return g?.reduce((o,n)=>(o.noOfQuotations+=n.noOfQuotations,o.quotationsAmount+=n.quotationsAmount,o.remissionsAmount+=n.remissionsAmount,o.salesAmount+=n.salesAmount,o),A)||A})||[];return{company:h,sellers:v}})||[]);return(h,s)=>(d(!0),c(q,null,z(u.value,(y,l)=>(d(),c("div",{key:l,style:{padding:"4px"}},[a("div",me,[a("div",he,[s[3]||(s[3]=a("span",{class:"text-weight-thin"}," Resumen de ventas de ",-1)),a("span",null,r(y.company),1),e.month?(d(),c(q,{key:0},[s[0]||(s[0]=a("span",{class:"text-weight-thin"}," en ",-1)),a("span",null,r(m(H)(e.month)),1),a("span",ve,"/"+r(e.year),1)],64)):(d(),c(q,{key:1},[s[1]||(s[1]=a("span",{class:"text-weight-thin"}," de la semana del ",-1)),a("span",null,r(e.week!==void 0?m(N)(e.weekStartAndEnd?.[e.week]?.startDate||""):""),1),s[2]||(s[2]=a("span",{class:"text-weight-thin"}," al ",-1)),a("span",null,r(e.week!==void 0?m(N)(e.weekStartAndEnd?.[e.week]?.endDate||""):""),1)],64))]),a("div",fe,[(d(!0),c(q,null,z(y.sellers,(b,v)=>(d(),c("div",{key:v,class:"q-ma-md"},[_(ce,{seller:b,"is-week-view":!(e.month&&e.month>0)},null,8,["seller","is-week-view"])]))),128))])])]))),128))}}),xe=B({__name:"IndexPage",setup(e){return(t,u)=>(d(),R(ke))}});export{xe as default};
